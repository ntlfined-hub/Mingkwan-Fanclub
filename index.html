<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<title>FIN-JOD ¬∑ Professional Quiz (Mobile Optimized)</title>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<style>
:root{
  --bg-from:#0b1120; --bg-to:#1e293b;
  --card-bg:rgba(255,255,255,0.12); --line:#334155;
  --accent1:#6366f1; --accent2:#22d3ee;
  --text:#f9fafb; --muted:#d1d5db;
  /* ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Ç‡∏≠‡∏á‡πÅ‡∏ñ‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏≠‡∏¢ (‡∏£‡∏ß‡∏° safe-area) */
  --actions-h: 84px;
}
*{box-sizing:border-box}
body{
  font-family:'Plus Jakarta Sans',sans-serif;
  background:linear-gradient(180deg,var(--bg-from),var(--bg-to));
  color:var(--text); min-height:100vh; margin:0;
  -webkit-font-smoothing:antialiased; text-shadow:0 1px 2px rgba(0,0,0,.35);
  padding:12px; display:flex; align-items:flex-start; justify-content:center;
}
.card{
  background:var(--card-bg); border:1px solid rgba(255,255,255,.15);
  backdrop-filter:blur(18px); border-radius:20px;
  width:100%; max-width:420px;
  box-shadow:0 8px 40px rgba(0,0,0,.6);
  padding:18px;
}
/* ‡πÄ‡∏ß‡πâ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ñ‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏≠‡∏¢‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏ß‡∏¥‡∏ã */
.card.has-actions{ padding-bottom: calc(16px + var(--actions-h)); }

h1{font-size:1.65rem; font-weight:800; line-height:1.25; margin:0}
h2{font-size:1.08rem; font-weight:700; line-height:1.45; margin:0}
.text-dim{color:var(--muted)}

.input{
  width:100%; padding:.9rem 1rem; border-radius:12px; font-size:1rem;
  background:rgba(255,255,255,.08); color:var(--text);
  border:1px solid rgba(255,255,255,.2); outline:0;
  transition:border .2s ease, box-shadow .2s ease;
}
.input::placeholder{color:#9ca3af}
.input:focus{ border-color:var(--accent2); box-shadow:0 0 0 3px rgba(34,211,238,.3) }

/* ‡∏õ‡∏∏‡πà‡∏° */
.btn{
  display:inline-flex; align-items:center; justify-content:center; gap:.5rem;
  width:100%; padding:.95rem 1.05rem; border-radius:14px;
  font-weight:800; font-size:1.02rem; border:1px solid transparent;
  transition:filter .2s ease, transform .06s ease;
}
.btn:active{ transform:translateY(1px) }
.btn-primary{ background:linear-gradient(90deg,var(--accent1),var(--accent2)); color:#fff; box-shadow:0 0 18px rgba(34,211,238,.38) }
.btn-primary:hover{ filter:brightness(1.06) }
.btn-ghost{ background:rgba(255,255,255,.1); border:1px solid var(--line); color:var(--text) }
.btn[disabled]{opacity:.55; cursor:not-allowed}

/* ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡∏£‡∏ö‡πÉ‡∏ô‡∏à‡∏≠) */
.option{
  border:1px solid rgba(255,255,255,.16); border-radius:14px;
  padding:.85rem 1rem; background:rgba(255,255,255,.06);
  cursor:pointer; transition:background .2s ease, box-shadow .2s ease, border-color .2s ease;
  line-height:1.45; font-size:1rem;
}
.option:hover{ background:rgba(34,211,238,.16) }
.option.selected{
  background:linear-gradient(90deg,var(--accent1),var(--accent2));
  color:#fff; border-color:transparent; box-shadow:0 0 16px rgba(34,211,238,.48)
}

/* Progress */
.progress{ height:10px; background:rgba(255,255,255,.12); border-radius:999px; overflow:hidden }
.progress>div{ height:100%; width:0%; transition:width .4s ease;
  background:linear-gradient(90deg,#6366f1,#22d3ee,#06b6d4) }

/* ‡πÅ‡∏ñ‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏≠‡∏¢‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡∏ï‡πå) */
.actions{
  position:sticky; bottom:0; left:0; right:0;
  padding:10px 0 calc(env(safe-area-inset-bottom,0) + 8px);
  background:linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,.35));
  backdrop-filter:blur(8px); margin-top:12px;
}
.actions .row{ display:flex; gap:10px }

/* ‡∏ã‡πà‡∏≠‡∏ô/‡πÇ‡∏ä‡∏ß‡πå */
.hidden{display:none!important}

/* Mobile fine-tune */
@media (max-width:480px){
  body{ padding:10px }
  .card{ border-radius:18px; padding:16px }
  h1{ font-size:1.55rem }
  h2{ font-size:1.02rem }
  .option{ padding:.8rem .9rem; font-size:.98rem }
  .btn{ padding:.9rem 1rem; font-size:1rem }
  :root{ --actions-h: 90px }
}
</style>
</head>
<body>
  <!-- LOGIN -->
  <section id="screen-login" class="card">
    <h1>‡πÄ‡∏Å‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô üí°</h1>
    <p class="mt-2 text-sm text-dim">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô</p>
    <div class="mt-5 space-y-3">
      <input id="nickname" class="input" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô" autocomplete="nickname" maxlength="30">
      <input id="empId" class="input" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô (A‚ÄìZ, 0‚Äì9) 4‚Äì16 ‡∏ï‡∏±‡∏ß" maxlength="16" inputmode="latin">
      <button id="startBtn" class="btn btn-primary mt-1">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
    </div>
  </section>

  <!-- QUIZ -->
  <section id="screen-quiz" class="card has-actions hidden">
    <div class="flex justify-between text-sm mb-3 text-dim">
      <span>‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° <span id="qIndex">1</span>/<span id="qTotal">5</span></span>
      <span id="timer">0:00</span>
    </div>
    <div class="progress mb-4"><div id="bar"></div></div>
    <h2 id="qTitle" class="mb-3"></h2>
    <div id="options" class="space-y-2"></div>

    <!-- Sticky bottom actions: NEXT before PREV; last question shows SUBMIT only -->
    <div class="actions">
      <div class="row">
        <button id="nextBtn" class="btn btn-primary flex-1" type="button">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
        <button id="prevBtn" class="btn btn-ghost w-1/3" type="button">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
        <button id="submitBtn" class="btn btn-primary flex-1 hidden" type="button">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
      </div>
    </div>
  </section>

  <!-- RESULT -->
  <section id="screen-result" class="card hidden">
    <h1>‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì üéØ</h1>
    <div class="mt-6 text-center">
      <div id="scoreText" class="result-num">0/0</div>
      <p class="mt-2">‡∏Ñ‡∏¥‡∏î‡πÄ‡∏õ‡πá‡∏ô <span id="percentText">0%</span></p>
      <p class="text-dim mt-1">‡πÄ‡∏ß‡∏•‡∏≤ <span id="timeText">0:00</span></p>
    </div>
    <div class="mt-6">
      <button id="playAgainBtn" class="btn btn-ghost">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
    </div>
  </section>

<script>
const GAS_WEB_APP_URL="https://script.google.com/macros/s/AKfycbwqRg7I3M2OsNyzgfexr9IUyosCSXYAdjdHDAic4mQk8Opvv0_4G2Y7elVg3RRjing_7g/exec";
const EMP_ID_RULE=/^[A-Za-z0-9]{4,16}$/;
const BANK=[
 {title:"‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏£‡∏≤‡∏°‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏≠‡∏∞‡πÑ‡∏£",options:["‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°","‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå","‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°","‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô"],correctIndex:2},
 {title:"‡∏û‡∏µ‡πà‡∏Ç‡∏ß‡∏±‡∏ç‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏¥‡∏î‡∏•‡πâ‡∏≠‡∏î‡πâ‡∏ß‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏∞‡πÑ‡∏£",options:["‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏™‡∏≤‡∏Ç‡∏≤","‡∏£‡∏õ‡∏†","‡∏´‡∏ô‡πà‡∏ß‡∏¢ M","‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏™‡πà‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"],correctIndex:3},
 {title:"‡∏û‡∏µ‡πà‡∏Ç‡∏ß‡∏±‡∏ç‡∏°‡∏µ‡∏•‡∏π‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡∏µ‡πà‡∏Ñ‡∏ô",options:["1 ‡∏Ñ‡∏ô","2 ‡∏Ñ‡∏ô","3 ‡∏Ñ‡∏ô","4 ‡∏Ñ‡∏ô"],correctIndex:1},
 {title:"‡∏à‡∏≤‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠‡πÉ‡∏ä‡πâ ‡∏û‡∏µ‡πà‡∏Ç‡∏ß‡∏±‡∏ç‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏Ç‡∏≤‡∏¢‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏£‡∏Å",options:["‡∏ö‡πâ‡∏≤‡∏ô","‡∏£‡∏ñ","‡∏ó‡∏≠‡∏á","‡∏ó‡∏µ‡∏ß‡∏µ"],correctIndex:0},
 {title:"‡πÉ‡∏ô‡∏≠‡∏î‡∏µ‡∏ï ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏¥‡∏î‡∏•‡∏ö ‡∏û‡∏µ‡πà‡∏Ç‡∏ß‡∏±‡∏ç‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£",options:["‡∏Å‡∏î‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï","‡∏≠‡∏î‡∏Ç‡πâ‡∏≤‡∏ß","‡∏¢‡∏∑‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô","‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢"],correctIndex:0}
];

let state={nickname:"",empId:"",index:0,questions:[],startTs:0,timer:null,submitted:false};
const $=id=>document.getElementById(id);
function shuffle(a){return a.slice().sort(()=>Math.random()-.5)}
function buildQuestions(){
  return shuffle(BANK).map(q=>({title:q.title,choices:shuffle(q.options.map((t,i)=>({text:t,correct:i===q.correctIndex}))),answer:null}))
}
function mmss(ms){const s=Math.floor(ms/1000),m=Math.floor(s/60);return m+':'+String(s%60).padStart(2,'0')}
function show(id){["screen-login","screen-quiz","screen-result"].forEach(s=>$(s).classList.add("hidden"));$(id).classList.remove("hidden")}
function startTimer(){stopTimer();state.startTs=Date.now();state.timer=setInterval(()=>{$("timer").textContent=mmss(Date.now()-state.startTs)},500)}
function stopTimer(){if(state.timer){clearInterval(state.timer);state.timer=null}}
function renderQuestion(){
  const q=state.questions[state.index];
  $("qTitle").textContent=q.title;
  const box=$("options"); box.innerHTML="";
  q.choices.forEach((c,i)=>{
    const div=document.createElement("div");
    div.className="option"+(q.answer===i?" selected":"");
    div.textContent=c.text;
    div.onclick=()=>{q.answer=i;[...box.children].forEach(el=>el.classList.remove("selected"));div.classList.add("selected");updateNav()};
    box.appendChild(div);
  });
  $("qIndex").textContent=state.index+1;
  $("qTotal").textContent=state.questions.length;
  $("bar").style.width=(state.index/state.questions.length*100)+"%";
  updateNav();
}
function updateNav(){
  const first=state.index===0, last=state.index===state.questions.length-1, ans=state.questions[state.index].answer!=null;
  $("prevBtn").disabled=first;
  $("nextBtn").classList.toggle("hidden", last);
  $("nextBtn").disabled=!ans || last;
  $("submitBtn").classList.toggle("hidden", !last);
  $("submitBtn").disabled=!ans;
}
$("startBtn").onclick=()=>{
  const n=$("nickname").value.trim(), e=$("empId").value.trim();
  if(n.length<2){alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"); return}
  if(!EMP_ID_RULE.test(e)){alert("‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"); return}
  state.nickname=n; state.empId=e; state.questions=buildQuestions(); state.index=0;
  startTimer(); show("screen-quiz"); renderQuestion();
};
$("nextBtn").onclick=()=>{ if(state.index<state.questions.length-1){state.index++; renderQuestion()} };
$("prevBtn").onclick=()=>{ if(state.index>0){state.index--; renderQuestion()} };
$("submitBtn").onclick=()=>{
  if(state.submitted) return;
  const spent=Date.now()-state.startTs;
  const score=state.questions.filter(q=>q.answer!=null && q.choices[q.answer].correct).length;
  const percent=Math.round(score/state.questions.length*100);
  stopTimer(); state.submitted=true;
  $("scoreText").textContent=score+"/"+state.questions.length;
  $("percentText").textContent=percent+"%";
  $("timeText").textContent=mmss(spent);
  show("screen-result");
  const form=new URLSearchParams({nickname:state.nickname,empId:state.empId,score,total:state.questions.length,percent,spentMs:spent});
  fetch(GAS_WEB_APP_URL,{method:"POST",body:form}); // fire-and-forget
};
$("playAgainBtn").onclick=()=>{
  state={nickname:"",empId:"",index:0,questions:[],startTs:0,timer:null,submitted:false};
  $("nickname").value=""; $("empId").value=""; show("screen-login");
};
</script>
</body>
</html>
